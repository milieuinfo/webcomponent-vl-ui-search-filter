{"version":3,"file":"tabs.js","sources":["../../../vl-ui-util/src/js/breakpoint.js","../../src/js/tabs.js"],"sourcesContent":["class Breakpoint {\n  constructor() {\n    this.value = null;\n  }\n\n  // Private functions\n  _getBreakpoint() {\n    // transfer css breakpoints to JS\n    return window\n      .getComputedStyle(document.body, ':before')\n      .getPropertyValue('content')\n      .replace(/\"/g, '');\n  }\n\n  // Public functions\n  dress() {\n    this.value = this._getBreakpoint();\n\n    /**\n     * Add eventlisteners to window\n     */\n    window.addEventListener(\n      'resize',\n      vl.util.debounce(() => {\n        this.refreshValue();\n      }),\n      50\n    );\n  }\n\n  refreshValue() {\n    this.value = this._getBreakpoint();\n  }\n}\n\n\nif(!('breakpoint' in vl)) {\n  vl.breakpoint = new Breakpoint();\n  vl.breakpoint.dress();\n}\n\nexport default Breakpoint;\n","import Breakpoint from '@govflanders/vl-ui-util/src/js/breakpoint';\n\n// Private Variables\nconst tabActiveClass = `${vl.ns}tab--active`,\n  tabClass = `${vl.ns}tab`,\n  dataTabList = `[data-${vl.ns}tabs-list]`,\n  dataTab = `[data-${vl.ns}tab]`,\n  dataTabPane = `[data-${vl.ns}tab-pane]`,\n  tabToggleAtt = `data-${vl.ns}tabs-toggle`,\n  tabShowAtt = `data-${vl.ns}show`,\n  tabCloseAtt = `data-${vl.ns}close`,\n  tabsAtt = `data-${vl.ns}tabs`;\n\nconst breakpoint = new Breakpoint();\n\nbreakpoint.dress();\n\nclass Tabs {\n  constructor() {\n    this.currentTabIndexForCurrentTabsContainer = -1;\n  }\n\n  resetTabIndexesForTabs(tabs) {\n    vl.util.each(tabs, (tab) => {\n      tab.setAttribute('tabindex', '-1');\n      tab.setAttribute('aria-selected', 'false');\n      if(typeof tab.closest === 'function'){ // check for IE\n        vl.util.removeClass(tab.closest(`.${tabClass}`), tabActiveClass);\n      }\n    });\n  }\n\n  resetTabPanes(tabPanes) {\n    vl.util.each(tabPanes, (pane) => {\n      pane.setAttribute('hidden', 'hidden');\n      pane.setAttribute(`${tabShowAtt}`, 'false');\n    });\n  }\n\n  showTabPaneForTab(tab, tabPane) {\n    // hightlight tab\n    tab.setAttribute('tabindex', '0');\n    if(typeof tab.closest === 'function'){ // check for IE\n      vl.util.addClass(tab.closest(`.${tabClass}`), tabActiveClass);\n    }\n    tab.setAttribute('aria-selected', true);\n\n    // hightlight pane\n    tabPane.setAttribute('hidden', '');\n    tabPane.setAttribute(`${tabShowAtt}`, 'true');\n  }\n\n  updateResponsiveBtnLabelForTabsContainerWithTab(tabsContainer, tab){\n    const toggleBtnEl = tabsContainer.querySelector(`[${tabToggleAtt}] span`);\n\n    toggleBtnEl.innerHTML = tab.innerHTML;\n  }\n\n  setupResponsiveToggleBtnForTabsContainer(tabsContainer){\n    const toggleBtnEl = tabsContainer.querySelector(`[${tabToggleAtt}]`);\n    const tabsList = tabsContainer.querySelector(`${dataTabList}`);\n\n    const bp = breakpoint._getBreakpoint();\n\n    // setup responsive toggle btn\n    if (bp === 'xsmall' || bp === 'small') {\n      toggleBtnEl.addEventListener('click', () => {\n        const isListOpen = tabsList.getAttribute(tabShowAtt) === 'true';\n\n        tabsList.setAttribute(tabShowAtt, isListOpen ? 'false' : 'true');\n        tabsList.setAttribute('aria-hidden', isListOpen ? 'true' : 'false');\n        toggleBtnEl.setAttribute('aria-expanded', isListOpen ? 'true' : 'false');\n        toggleBtnEl.setAttribute(tabCloseAtt, isListOpen ? 'false' : 'true');\n      });\n    }\n  }\n\n  dress(tabsContainer) {\n    this.setupResponsiveToggleBtnForTabsContainer(tabsContainer);\n\n    const tabs = tabsContainer.querySelectorAll(`${dataTab}`);\n    const tabPanes = tabsContainer.querySelectorAll(`${dataTabPane}`);\n    const currentTabHash = window.location.hash;\n    const activeTab = document.querySelector(`[href='${currentTabHash}']`);\n\n    if(activeTab){\n      activeTab.click();\n    }\n\n    // only add click & focus listeners to tabs when there are panes to toggle\n    if(tabPanes.length > 0){\n      vl.util.each(tabs, (tab, index) => {\n        tab.addEventListener('focus', () => {\n          this.currentTabIndexForCurrentTabsContainer = index;\n          tab.click();\n        });\n        tab.addEventListener('click', () => {\n          // event.preventDefault();\n\n          // reset tabs & panes\n          this.resetTabIndexesForTabs(tabs);\n          this.resetTabPanes(tabPanes);\n\n          // set tab\n          this.showTabPaneForTab(tab, tabPanes[index]);\n\n          // set responsive button label\n          this.updateResponsiveBtnLabelForTabsContainerWithTab(tabsContainer, tab);\n\n          const toggleBtnEl = tabsContainer.querySelector(`[${tabToggleAtt}]`);\n\n          toggleBtnEl.click();\n        });\n      });\n    }\n\n    // Deteact arrow & spacebar usage on tabContainer\n    tabsContainer.addEventListener('keydown', event => {\n      switch (event.keyCode) {\n        case 37:{\n          // empty\n        }\n        // fallsthrough\n        case 38:{\n          // left arrow\n          let i = this.currentTabIndexForCurrentTabsContainer - 1;\n\n          if(i < 0){\n            i = tabs.length - 1;\n          }\n          const prevTabEl = tabs[i];\n\n          if(prevTabEl){\n            prevTabEl.focus();\n          }\n          break;\n        }\n        // fallsthrough\n        case 39:{\n          // empty\n        }\n        // fallsthrough\n        case 40:{\n          // right arrow\n          let i = this.currentTabIndexForCurrentTabsContainer + 1;\n\n          if(i >= tabs.length){\n            i = 0;\n          }\n          const nextTabEl = tabs[i];\n\n          if(nextTabEl){\n            nextTabEl.focus();\n          }\n          break;\n        }\n      }\n    });\n  }\n\n  dressAll() {\n    const wrappers = document.querySelectorAll(\n      `[${tabsAtt}]:not([data-${vl.ns}js-dress=\"false\"])`\n    );\n\n    vl.util.each(wrappers, tabsContainer => {\n      this.dress(tabsContainer);\n    });\n  }\n}\n\nif(!('tabs' in vl)) {\n  vl.tabs = new Tabs();\n  vl.tabs.dressAll();\n}\n\nexport default Tabs;\n"],"names":["Breakpoint","value","window","getComputedStyle","document","body","getPropertyValue","replace","_getBreakpoint","addEventListener","vl","util","debounce","refreshValue","breakpoint","dress","tabActiveClass","ns","tabClass","dataTabList","dataTab","dataTabPane","tabToggleAtt","tabShowAtt","tabCloseAtt","tabsAtt","Tabs","currentTabIndexForCurrentTabsContainer","tabs","each","tab","setAttribute","closest","removeClass","tabPanes","pane","tabPane","addClass","tabsContainer","toggleBtnEl","querySelector","innerHTML","tabsList","bp","isListOpen","getAttribute","setupResponsiveToggleBtnForTabsContainer","querySelectorAll","currentTabHash","location","hash","activeTab","click","length","index","resetTabIndexesForTabs","resetTabPanes","showTabPaneForTab","updateResponsiveBtnLabelForTabsContainerWithTab","event","keyCode","i","prevTabEl","focus","nextTabEl","wrappers","dressAll"],"mappings":"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"}